@page "/select-device-dialog"

<RadzenSteps>
    <Steps>
        <RadzenStepsItem Text="Select ESI file">
            <RadzenText TextStyle="TextStyle.H5" TagName="TagName.H3" class="rz-my-6">
                1. Select an ESI file to continue
            </RadzenText>
            <RadzenUpload Url="upload/esi" Accept="text/xml" Progress=@OnProgress Complete=@OnComplete Error=@OnError
                class="w-100" />
            <RadzenStack Orientation="Radzen.Orientation.Horizontal" Gap="10px"
                JustifyContent="Radzen.JustifyContent.End" Visible=@showProgress class="mt-4">
                <RadzenProgressBar Value=@progress class="w-100" />
                <RadzenButton Icon="close" Variant="Variant.Outlined" Click=@(args => CancelUpload()) class="d-block"
                    Size="Radzen.ButtonSize.ExtraSmall" />
            </RadzenStack>
            <RadzenAlert AllowClose="false" Variant="Variant.Flat" AlertStyle="Radzen.AlertStyle.Success"
                Visible=@showComplete Shade="Shade.Lighter">
                @completeMessage
            </RadzenAlert>
            <RadzenAlert AllowClose="false" Variant="Variant.Flat" AlertStyle="Radzen.AlertStyle.Danger"
                Visible=@showError Shade="Shade.Lighter">
                @errorMessage
            </RadzenAlert>
        </RadzenStepsItem>
        <RadzenStepsItem Text="Select EtherCAT device" Disabled="@(!showComplete)">
            <RadzenText TextStyle="TextStyle.H5" TagName="TagName.H3" class="rz-my-6">
                2. Select an EtherCAT device to continue
            </RadzenText>
            <RadzenDataGrid AllowFiltering="true" AllowColumnResize="true" AllowAlternatingRows="false"
                FilterMode="FilterMode.Advanced" AllowSorting="true" PageSize="10" AllowPaging="true"
                PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true" Data="@devices"
                TItem="Configurator.Models.Device" ColumnWidth="300px" LogicalFilterOperator="LogicalFilterOperator.Or">
                <Columns>
                    <RadzenDataGridColumn TItem="Configurator.Models.Device" Property="Id" Title="ID" Frozen="true"
                        Width="80px" />
                    <RadzenDataGridColumn TItem="Configurator.Models.Device" Property="Type" Title="Type" Frozen="true"
                        Width="80px" />
                    <RadzenDataGridColumn TItem="Configurator.Models.Device" Property="Name" Title="Name"
                        Width="160px" />
                    <RadzenDataGridColumn TItem="Configurator.Models.Device" Property="ProductCode" Title="Product code"
                        FormatString="0x{0:X8}" Width="160px" />
                    <RadzenDataGridColumn TItem="Configurator.Models.Device" Property="RevisionNo"
                        Title="Revision number" FormatString="0x{0:X8}" Width="200px" />
                </Columns>
            </RadzenDataGrid>
        </RadzenStepsItem>
    </Steps>
</RadzenSteps>

<EventConsole @ref=@console />